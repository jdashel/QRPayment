(function(t){function e(e){for(var a,o,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)o=s[d],i[o]&&p.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},r=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/QRPayment/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0096":function(t,e,n){t.exports=n.p+"img/commerce.278a4939.svg"},"034f":function(t,e,n){"use strict";var a=n("64a9"),i=n.n(a);i.a},"0f62":function(t,e,n){t.exports=n.p+"img/user.13e1b879.svg"},"10ad":function(t,e,n){"use strict";var a=n("2a10"),i=n.n(a);i.a},"12ad":function(t,e,n){"use strict";var a=n("a18a"),i=n.n(a);i.a},"201b":function(t,e,n){},2764:function(t,e,n){t.exports=n.p+"img/success.334d63e3.svg"},"2a10":function(t,e,n){},"2ab1":function(t,e,n){},"309a":function(t,e,n){t.exports=n.p+"img/logout.9fab3d35.svg"},"36be":function(t,e,n){t.exports=n.p+"img/menu.0cceadc9.svg"},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],o=(n("034f"),n("2877")),s={},c=Object(o["a"])(s,i,r,!1,null,null,null),l=c.exports,u=n("8c4f"),d=function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("div",{staticClass:"signin"},[i("div",{attrs:{id:"header"}},[i("img",{attrs:{id:"logo",src:n("9b19"),alt:""}}),i("div",{attrs:{id:"title"}},[e._v(e._s(e.title))])]),i("div",{attrs:{id:"form"}},[e.register?i("Input",{staticClass:"input",attrs:{type:"text",icon:n("0f62"),label:"Usuario"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}):e._e(),i("Input",{staticClass:"input",attrs:{type:"email",icon:n("9055"),label:"Correo electrónico"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),i("Input",{staticClass:"input",attrs:{type:"password",icon:n("6005"),label:"Contraseña"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),i("div",[e.register?i("div",{staticClass:"button",on:{click:e.signup}},[e._v("Registrar")]):i("div",{staticClass:"button",on:{click:e.signin}},[e._v("Acceder")]),e.register?i("div",{staticClass:"note"},[e._v("¿Ya tienes cuenta? "),i("b",{on:{click:function(){e.register=!e.register,t.title="Acceso"}}},[e._v("Ingresa ...")])]):i("div",{staticClass:"note"},[e._v("¿No tienes cuenta? "),i("b",{on:{click:function(){e.register=!e.register,t.title="Registro"}}},[e._v("Crea una ...")])])])])},p=[],m=(n("a481"),n("8aa5")),f=n.n(m),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group"},[n("input",{ref:"inp",attrs:{type:t.type,required:"required"},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),n("img",{attrs:{src:t.icon,alt:""}}),n("span",{staticClass:"highlight"}),n("span",{staticClass:"bar"}),n("label",[t._v(t._s(t.label))])])},g=[],h={name:"Input",props:["label","type","icon","value"]},b=h,_=(n("fb31"),Object(o["a"])(b,v,g,!1,null,"4bf65f1a",null)),y=_.exports,x={name:"Signin",components:{Input:y},data:function(){return{title:"Acceso",username:"",email:"",password:"",password2:"",register:!1,valid:!1}},methods:{signin:function(){var t=this;f.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(e){console.log(e),t.$router.replace({name:"main_menu"})},function(e){console.log(e),t.valid=!1})},signup:function(){var t=this;f.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(function(e){console.log(e),t.$router.replace({name:"main_menu"})},function(e){console.log(e),t.valid=!1})}}},k=x,C=(n("cb80"),Object(o["a"])(k,d,p,!1,null,"9b2c8a64",null)),$=C.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main-menu"}},[a("div",{attrs:{id:"header"}},[a("img",{attrs:{id:"menu",src:n("36be"),alt:""}}),a("img",{attrs:{id:"logout",src:n("309a"),alt:""},on:{click:t.logout}}),a("img",{attrs:{id:"logo",src:n("bc28"),alt:""}}),a("div",{attrs:{id:"title"}},[t._v(t._s(t.title))])]),a("div",{attrs:{id:"options"}},t._l(t.list,function(e,n){return a("MenuItem",{key:n,attrs:{icon:e.icon,title:e.title,description:e.description,color:e.color,action:e.action,idx:t.list.length-n}})}),1)])},O=[],A=function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("div",{attrs:{id:"menu-item"},on:{click:function(){return t.$router.push(t.action)}}},[a("img",{attrs:{id:"icon",src:e.icon,alt:"no hay"}}),a("div",{attrs:{id:"content"}},[a("div",{attrs:{id:"title"}},[e._v(e._s(e.title))]),a("div",{attrs:{id:"description"}},[e._v(e._s(e.description))]),a("hr")])])},j=[],E={name:"MenuItem",props:["icon","title","description","color","action","idx"]},P=E,I=(n("a4db"),Object(o["a"])(P,A,j,!1,null,"3e400c00",null)),S=I.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{backgroundColor:t.color},attrs:{id:"menu-header"}},[n("img",{attrs:{id:"avatar",src:t.avatar,alt:""}}),n("div",[t._v(t._s(t.title))])])},M=[],R={name:"MenuHeader",props:["avatar","title","color"]},L=R,D=(n("d67f"),Object(o["a"])(L,q,M,!1,null,"3768f6d1",null)),T=D.exports,z={name:"MainMenu",components:{MenuItem:S,MenuHeader:T},data:function(){return{list:[{icon:n("755e"),title:"Pagar",description:"Leer un código QR para pagar",color:"#029783",action:"scan_code"},{icon:n("f196"),title:"Cobrar",description:"Generar un código QR para pagar",color:"#017364",action:"generate_code"},{icon:n("bc38"),title:"Billetera",description:"Lista de pagos y cobros",color:"#095B50",action:"transaction_list"},{icon:n("805d"),title:"Transacciones",description:"Modificar datos de cuenta",color:"#37474F",action:"settings"}],title:"Jesús Mondragón"}},methods:{logout:function(){var t=this;f.a.auth().signOut().then(function(){t.$router.replace({name:"signin"})}).catch(function(e){t.$router.replace({name:"signin"})})}}},Q=z,N=(n("8bc6"),Object(o["a"])(Q,w,O,!1,null,"dff23adc",null)),U=N.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"scan-qr"}},[a("div",{attrs:{id:"header"}},[a("img",{attrs:{id:"close",src:n("bf37"),alt:""},on:{click:t.cancel}}),a("img",{attrs:{id:"logo",src:n("ba81"),alt:""}}),a("div",{attrs:{id:"title"}},[t._v(t._s(t.title))])]),a("canvas",{ref:"canvas",attrs:{id:"canvas"}}),a("video",{ref:"video",attrs:{hidden:""}})])},B=[],H=n("ecec"),J=n.n(H),G={name:"ScanCode",data:function(){return{video:{},canvas_tag:{},canvas:null,title:"Enfoca el código QR hasta que se vea claramente"}},mounted:function(){var t=this;this.video=this.$refs.video,this.canvas_tag=this.$refs.canvas,this.canvas=this.canvas_tag.getContext("2d"),navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(function(e){t.video.srcObject=e,t.video.setAttribute("playsinline",!0),t.video.play(),requestAnimationFrame(t.tick)})},methods:{cancel:function(){this.video.src="",this.video.srcObject.getTracks()[0].stop(),this.$router.back()},tick:function(){if(this.video.readyState===this.video.HAVE_ENOUGH_DATA){this.canvas.drawImage(this.video,0,0,this.canvas_tag.width,this.canvas_tag.height);var t=this.canvas.getImageData(0,0,this.canvas_tag.width,this.canvas_tag.height),e=J()(t.data,t.width,t.height,{inversionAttempts:"dontInvert"});if(e){var a=this.canvas.getImageData(e.location.topLeftCorner.x,e.location.topLeftCorner.y,e.location.bottomRightCorner.x-e.location.topLeftCorner.x,e.location.bottomRightCorner.y-e.location.topLeftCorner.y);this.video.src="",this.video.srcObject.getTracks()[0].stop();try{var i=JSON.parse(e.data);return i.commerce&&i.amount&&i.concept?(this.$store.commit("setImage",a),this.$store.commit("setPayment",i),void this.$router.push("payment_details")):(console.log(err),void this.$router.push({name:"error",params:{title:"QR inválido",desc:"¿Desea volver a intentar?",image:n("afb7"),reject:"main_menu"}}))}catch(err){return console.log(err),void this.$router.push({name:"error",params:{title:"QR inválido",desc:"¿Desea volver a intentar?",image:n("afb7"),reject:"main_menu"}})}}}requestAnimationFrame(this.tick)}}},K=G,W=(n("12ad"),Object(o["a"])(K,F,B,!1,null,"514ec270",null)),V=W.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payment_details"},[a("div",{attrs:{id:"header"}},[a("img",{attrs:{id:"back",src:n("ccfe"),alt:""},on:{click:function(e){return t.$router.back()}}}),a("img",{attrs:{id:"close",src:n("bf37"),alt:""},on:{click:t.close}}),a("img",{attrs:{id:"logo",src:n("57b7"),alt:""}}),a("div",{attrs:{id:"title"}},[t._v(t._s(t.title))]),a("div",{attrs:{id:"content"}},[t._v(t._s(t.content))])]),a("div",{attrs:{id:"details"}},[a("Label",{staticClass:"input",attrs:{type:"text",icon:n("0096"),label:"Comercio"},model:{value:t.commerce,callback:function(e){t.commerce=e},expression:"commerce"}}),a("Label",{staticClass:"input",attrs:{type:"text",icon:n("f7cb"),label:"Monto"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),a("Label",{staticClass:"input",attrs:{type:"text",icon:n("a195"),label:"Concepto"},model:{value:t.concept,callback:function(e){t.concept=e},expression:"concept"}}),a("Label",{staticClass:"input",attrs:{type:"text",icon:n("9e8c"),label:"Método de pago"},model:{value:t.paymethod,callback:function(e){t.paymethod=e},expression:"paymethod"}})],1),a("div",{attrs:{id:"buttons"}},[a("div",{staticClass:"button",on:{click:t.pay}},[t._v("Pagar")])]),t.modal?a("div",{attrs:{id:"dialog-background"}},[a("div",{attrs:{id:"dialog-window"}},["authorizing"==t.process?a("Spinner",{attrs:{id:"spinner"}}):a("img",{attrs:{id:"success",src:n("2764"),alt:""}}),a("div",{attrs:{id:"dialog-title"}},[t._v(t._s(t.dialog_title))]),a("div",{attrs:{id:"dialog-content"}},[t._v(t._s(t.dialog_Content))])],1)]):t._e()])},Z=[],X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group"},[n("input",{attrs:{readonly:""},domProps:{value:t.value}}),n("img",{attrs:{src:t.icon,alt:""}}),n("span",{staticClass:"highlight"}),n("span",{staticClass:"bar"}),n("label",[t._v(t._s(t.label))])])},tt=[],et={name:"Input",props:["label","type","icon","value"]},nt=et,at=(n("9517"),Object(o["a"])(nt,X,tt,!1,null,"44749382",null)),it=at.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"spinner"}},[a("img",{attrs:{id:"outter",src:n("b5da"),alt:""}}),a("img",{attrs:{id:"inner",src:n("fc9f"),alt:""}})])},ot=[],st={name:"Spinner"},ct=st,lt=(n("baf6"),Object(o["a"])(ct,rt,ot,!1,null,"ae7d0eba",null)),ut=lt.exports,dt={name:"PaymentDetails",data:function(){return{commerce:this.$store.state.payment.commerce,amount:"$ "+(this.$store.state.payment.amount/100).toFixed(2),concept:this.$store.state.payment.concept,paymethod:"****-****-****-7894",title:"Atrás",content:"Detalles del pago, presione pagar para aceptar el pago",canvas_tag:{},canvas:null,modal:!1,process:"",dialog_title:"",dialog_Content:""}},components:{Label:it,Spinner:ut},mounted:function(){},methods:{pay:function(){this.modal=!0,this.process="authorizing",this.dialog_title="Autorizando",this.dialog_Content="Por favor espere un momento",setTimeout(this.finish,6e3)},finish:function(){var t=this;this.process="authorized",this.dialog_title="Éxito",this.dialog_Content="Pago realizado correctamente",setTimeout(function(){return t.$router.replace({name:"main_menu"})},3e3)},close:function(){}}},pt=dt,mt=(n("a010"),Object(o["a"])(pt,Y,Z,!1,null,"04849022",null)),ft=mt.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"payment-auth"}},[n("div"),n("Spinner",{attrs:{id:"spinner"}}),t._m(0)],1)},gt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"info"}},[n("div",{attrs:{id:"title"}},[t._v("PAGO")]),n("div",{attrs:{id:"label"}},[t._v("Estamos procesando tu pago"),n("br"),t._v("por favor espera")])])}],ht={name:"PaymentAuth",components:{Spinner:ut},mounted:function(){}},bt=ht,_t=(n("9cfc"),Object(o["a"])(bt,vt,gt,!1,null,"6079c65a",null)),yt=_t.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"payment-auth"}},[a("div"),a("img",{attrs:{src:n("2764"),alt:""}}),t._m(0)])},kt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"info"}},[n("div",{attrs:{id:"title"}},[t._v("REALIZADO")]),n("div",{attrs:{id:"label"}},[t._v("Pago realizado corectamente")])])}],Ct={name:"PaymentAuth",components:{Spinner:ut},mounted:function(){}},$t=Ct,wt=(n("10ad"),Object(o["a"])($t,xt,kt,!1,null,"2b9beb62",null)),Ot=wt.exports,At=function(){var t=this,e=this,n=e.$createElement,a=e._self._c||n;return a("div",{attrs:{id:"error"}},[a("img",{attrs:{src:e.$route.params.image,alt:""}}),a("div",{attrs:{id:"title"}},[e._v(e._s(e.$route.params.title))]),a("div",{attrs:{id:"desc"}},[e._v(e._s(e.$route.params.desc))]),a("div",{attrs:{id:"buttons"}},[a("div",{attrs:{id:"no"},on:{click:function(){return t.$router.replace({name:e.$route.params.reject})}}},[e._v("NO")]),a("div",{attrs:{id:"yes"},on:{click:function(){return t.$router.back()}}},[e._v("SI")])])])},jt=[],Et={name:"Error"},Pt=Et,It=(n("8e4f"),Object(o["a"])(Pt,At,jt,!1,null,"5823e514",null)),St=It.exports;a["a"].use(u["a"]);var qt=new u["a"]({mode:"history",base:"QRPayment",routes:[{path:"*",component:$},{path:"/",name:"signin",component:$},{path:"/main_menu",name:"main_menu",component:U,meta:{requiresAuth:!0}},{path:"/scan_code",name:"scan_code",component:V,meta:{requiresAuth:!0}},{path:"/payment_details",name:"payment_details",component:ft,meta:{requiresAuth:!0}},{path:"/payment_auth",name:"payment_auth",component:yt,meta:{requiresAuth:!0}},{path:"/payment_complete",name:"payment_complete",component:Ot,meta:{requiresAuth:!0}},{path:"/error/:title/:desc/:image",name:"error",component:St,meta:{requiresAuth:!0}}]});qt.beforeEach(function(t,e,n){var a=f.a.auth().currentUser,i=t.matched.some(function(t){return t.meta.requiresAuth});i&&!a?n("signin"):!i&&a?n("main_menu"):n()});var Mt=qt,Rt=n("2f62");a["a"].use(Rt["a"]);var Lt=new Rt["a"].Store({state:{image:{},payment:{}},mutations:{setImage:function(t,e){t.image=e},setPayment:function(t,e){t.payment=e}},getters:{image:function(t){return t.image},payment:function(t){return t.payment}}}),Dt=n("9483");Object(Dt["a"])("".concat("/QRPayment/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),a["a"].config.productionTip=!1;var Tt=null,zt={apiKey:"AIzaSyB0HD_RbkCnLurd91unK5j4OucRULifPd0",authDomain:"qrpayment-23745.firebaseapp.com",databaseURL:"https://qrpayment-23745.firebaseio.com",projectId:"qrpayment-23745",storageBucket:"qrpayment-23745.appspot.com",messagingSenderId:"49670041771"};f.a.initializeApp(zt),f.a.auth().onAuthStateChanged(function(){Tt||(Tt=new a["a"]({router:Mt,store:Lt,render:function(t){return t(l)}}).$mount("#app"))})},"57b7":function(t,e,n){t.exports=n.p+"img/bag.0bb274b6.svg"},6005:function(t,e,n){t.exports=n.p+"img/password.e04c6fea.svg"},"64a9":function(t,e,n){},"6d1b":function(t,e,n){},"755e":function(t,e,n){t.exports=n.p+"img/pay.b91a0745.svg"},"805d":function(t,e,n){t.exports=n.p+"img/transactions.32312383.svg"},"8bc6":function(t,e,n){"use strict";var a=n("2ab1"),i=n.n(a);i.a},"8d8b":function(t,e,n){},"8e4f":function(t,e,n){"use strict";var a=n("ec45"),i=n.n(a);i.a},"901b":function(t,e,n){},9055:function(t,e,n){t.exports=n.p+"img/email.c6eda5b2.svg"},9517:function(t,e,n){"use strict";var a=n("d29a"),i=n.n(a);i.a},"9b19":function(t,e,n){t.exports=n.p+"img/logo.ec0f6903.svg"},"9cfc":function(t,e,n){"use strict";var a=n("e2c5"),i=n.n(a);i.a},"9e8c":function(t,e,n){t.exports=n.p+"img/paymethod.aeaa6d2a.svg"},a010:function(t,e,n){"use strict";var a=n("8d8b"),i=n.n(a);i.a},a18a:function(t,e,n){},a195:function(t,e,n){t.exports=n.p+"img/smallbag.56a58e01.svg"},a4db:function(t,e,n){"use strict";var a=n("6d1b"),i=n.n(a);i.a},afb7:function(t,e,n){t.exports=n.p+"img/warning.65a8ac9c.svg"},b5da:function(t,e,n){t.exports=n.p+"img/spinner_1.3b5413da.svg"},ba81:function(t,e,n){t.exports=n.p+"img/qrlogo.89bd4227.svg"},baf6:function(t,e,n){"use strict";var a=n("201b"),i=n.n(a);i.a},bc28:function(t,e,n){t.exports=n.p+"img/avatar.f91b4bb9.svg"},bc38:function(t,e,n){t.exports=n.p+"img/wallet.89ddaa2f.svg"},bf37:function(t,e,n){t.exports=n.p+"img/close.3ff8a9dc.svg"},cb80:function(t,e,n){"use strict";var a=n("901b"),i=n.n(a);i.a},ccfe:function(t,e,n){t.exports=n.p+"img/back.6f002b75.svg"},d29a:function(t,e,n){},d67f:function(t,e,n){"use strict";var a=n("da4a"),i=n.n(a);i.a},da4a:function(t,e,n){},e2c5:function(t,e,n){},ec45:function(t,e,n){},f196:function(t,e,n){t.exports=n.p+"img/charge.533ce8fa.svg"},f7cb:function(t,e,n){t.exports=n.p+"img/money.cc074f69.svg"},fa5f:function(t,e,n){},fb31:function(t,e,n){"use strict";var a=n("fa5f"),i=n.n(a);i.a},fc9f:function(t,e,n){t.exports=n.p+"img/spinner_2.1aca05b5.svg"}});
//# sourceMappingURL=app-legacy.445b1b5a.js.map